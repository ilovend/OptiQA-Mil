# 软硬件系统架构学习笔记 — 框架

说明：本文件为学习软硬件系统架构的笔记框架，后续在对应小节补充要点、示例、习题与心得。

## 目录
- [系统架构基础](#系统架构基础)
- [硬件架构设计](#硬件架构设计)
- [软件架构模式](#软件架构模式)
- [实时系统架构](#实时系统架构)
- [分布式系统设计](#分布式系统设计)
- [嵌入式视觉系统](#嵌入式视觉系统)
- [可靠性设计](#可靠性设计)
- [系统性能优化](#系统性能优化)
- [集成与测试](#集成与测试)
- [军工系统特殊要求](#军工系统特殊要求)
- [学习资源与书签](#学习资源与书签)
- [学习进度与 TODO 列表](#学习进度与-todo-列表)

---

## 系统架构基础
- 架构定义与目标
- 系统分解与模块化
- 接口定义与管理
- 架构视图与文档
- 系统架构评估方法
- 示例：
```python
# 系统架构评估工具示例
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

# 架构评估雷达图示例
def architecture_evaluation_radar(architecture_name, metrics, scores, max_score=5):
    # 参数:
    # architecture_name: 架构名称
    # metrics: 评估指标列表
    # scores: 对应的评分列表
    # max_score: 最大分值
    
    # 数据准备
    num_metrics = len(metrics)
    angles = np.linspace(0, 2*np.pi, num_metrics, endpoint=False).tolist()
    angles += angles[:1]  # 闭合图形
    
    scores = np.array(scores)
    scores = np.append(scores, scores[0])  # 闭合图形
    
    # 创建图形
    fig, ax = plt.subplots(figsize=(10, 8), subplot_kw=dict(polar=True))
    
    # 绘制雷达图
    ax.plot(angles, scores, 'o-', linewidth=2, label=architecture_name)
    ax.fill(angles, scores, alpha=0.25)
    
    # 设置刻度和标签
    ax.set_thetagrids(np.degrees(angles[:-1]), metrics)
    ax.set_ylim(0, max_score)
    ax.set_yticks(np.arange(1, max_score+1))
    ax.set_title(f"架构评估: {architecture_name}", fontsize=15)
    ax.grid(True)
    
    # 添加图例
    ax.legend(loc='upper right')
    
    return fig, ax

# 示例使用: 比较两个不同的架构
def compare_architectures():
    metrics = ['可扩展性', '性能', '可维护性', '安全性', '成本效益', '可靠性', '实时性', '兼容性']
    
    # 两种不同架构的评分
    arch1_scores = [4.5, 3.2, 4.0, 4.2, 3.0, 4.5, 3.8, 3.5]
    arch2_scores = [3.8, 4.5, 3.5, 3.8, 4.2, 3.5, 4.5, 4.0]
    
    # 创建子图
    fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 7), subplot_kw=dict(polar=True))
    
    # 架构1
    angles = np.linspace(0, 2*np.pi, len(metrics), endpoint=False).tolist()
    angles += angles[:1]
    arch1_scores_plot = arch1_scores + [arch1_scores[0]]
    ax1.plot(angles, arch1_scores_plot, 'o-', linewidth=2, color='blue')
    ax1.fill(angles, arch1_scores_plot, alpha=0.25, color='blue')
    ax1.set_thetagrids(np.degrees(angles[:-1]), metrics)
    ax1.set_ylim(0, 5)
    ax1.set_title("集中式架构评估", fontsize=14)
    ax1.grid(True)
    
    # 架构2
    arch2_scores_plot = arch2_scores + [arch2_scores[0]]
    ax2.plot(angles, arch2_scores_plot, 'o-', linewidth=2, color='red')
    ax2.fill(angles, arch2_scores_plot, alpha=0.25, color='red')
    ax2.set_thetagrids(np.degrees(angles[:-1]), metrics)
    ax2.set_ylim(0, 5)
    ax2.set_title("分布式架构评估", fontsize=14)
    ax2.grid(True)
    
    plt.tight_layout()
    plt.show()
    
    # 表格对比
    comparison_data = {
        '评估指标': metrics,
        '集中式架构': arch1_scores,
        '分布式架构': arch2_scores,
        '差异': np.array(arch2_scores) - np.array(arch1_scores)
    }
    comparison_df = pd.DataFrame(comparison_data)
    print("架构评估对比表:")
    print(comparison_df)
    
    return comparison_df

# 系统架构组件关系图示例
def system_architecture_diagram():
    import networkx as nx
    
    # 创建图形
    G = nx.DiGraph()
    
    # 添加节点 - 系统组件
    components = {
        'UI': '用户界面',
        'BL': '业务逻辑层',
        'DAL': '数据访问层',
        'DB': '数据库',
        'VS': '视觉服务',
        'PLC': 'PLC控制器',
        'COMM': '通信模块',
        'DEV': '设备控制'
    }
    
    for code, name in components.items():
        G.add_node(code, label=name)
    
    # 添加边 - 组件间关系
    connections = [
        ('UI', 'BL', '用户操作'),
        ('BL', 'DAL', '数据请求'),
        ('DAL', 'DB', 'SQL查询'),
        ('BL', 'VS', '视觉任务'),
        ('VS', 'COMM', '结果传输'),
        ('BL', 'COMM', '控制命令'),
        ('COMM', 'PLC', '指令下发'),
        ('PLC', 'DEV', '设备控制'),
        ('DEV', 'VS', '触发检测')
    ]
    
    for src, dst, label in connections:
        G.add_edge(src, dst, label=label)
    
    # 创建图形
    plt.figure(figsize=(12, 8))
    pos = nx.spring_layout(G, seed=42)
    
    # 绘制节点
    nx.draw_networkx_nodes(G, pos, node_size=2000, node_color='lightblue')
    
    # 绘制边
    nx.draw_networkx_edges(G, pos, edge_color='gray', arrows=True, 
                          arrowstyle='->', arrowsize=15, width=1.5)
    
    # 添加标签
    node_labels = {node: f"{node}\n{G.nodes[node]['label']}" for node in G.nodes()}
    nx.draw_networkx_labels(G, pos, labels=node_labels, font_size=10)
    
    # 边标签
    edge_labels = {(u, v): d['label'] for u, v, d in G.edges(data=True)}
    nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_size=8)
    
    plt.title("光学检测系统架构组件关系图", fontsize=15)
    plt.axis('off')
    plt.tight_layout()
    plt.show()

# 执行示例
compare_architectures()
system_architecture_diagram()
```
- 记录：
    - 架构决策关键因素：

## 硬件架构设计
- 处理平台选型
- 相机与图像采集
- 光源与光学系统
- 工业控制设备
- 通信硬件
- 记录：
    - 硬件平台选型决策树：

## 软件架构模式
- 分层架构
- 客户端-服务器模式
- 微服务架构
- 事件驱动架构
- 数据流架构
- 记录：
    - 架构模式适用场景比较：

## 实时系统架构
- 实时性需求分析
- 硬实时与软实时
- 实时操作系统选择
- 任务调度策略
- 中断处理与优先级
- 记录：
    - 实时系统优化技巧：

## 分布式系统设计
- 分布式架构模型
- 负载均衡策略
- 分布式通信机制
- 数据一致性策略
- 容错与高可用设计
- 记录：
    - 分布式系统设计经验：

## 嵌入式视觉系统
- 嵌入式处理器选型
- 视觉算法优化
- 资源受限环境下的架构
- 视觉加速硬件
- 边缘计算应用
- 记录：
    - 嵌入式平台比较：

## 可靠性设计
- 可靠性需求分析
- 故障模式分析
- 冗余设计策略
- 监控与自诊断
- 故障恢复机制
- 记录：
    - 可靠性提升方法总结：

## 系统性能优化
- 性能瓶颈分析
- 计算优化策略
- 内存管理与优化
- I/O性能提升
- 并行与分布式处理
- 记录：
    - 性能优化案例：

## 集成与测试
- 集成策略与计划
- 接口测试方法
- 系统级测试
- 性能与压力测试
- 验收测试流程
- 记录：
    - 测试自动化实践：

## 军工系统特殊要求
- 国军标体系要求
- 安全等级与保密
- 电磁兼容性设计
- 环境适应性要求
- 长期可靠性保障
- 记录：
    - 军工项目架构设计要点：

## 学习资源与书签
- 架构设计标准
- 建模工具与方法
- 参考架构与模式
- 学习资源与社区
- 记录：
    - 资源链接：

## 学习进度与 TODO 列表
- [ ] 系统架构基本概念掌握
- [ ] 硬件架构设计方法学习
- [ ] 软件架构模式应用
- [ ] 实时系统设计实践
- [ ] 军工系统架构特点研究
- 自定义进度记录区：

---

备注：每个章节下可按"要点 / 代码示例 / 习题 / 参考链接 / 个人笔记"五小节结构补充内容。